# Кулинарный Бот

**Участники проекта:** Семёнова Екатерина Романовна 467417, Захарова Дарья Олеговна 465950

## Описание проекта

Умный кулинарный помощник для планирования меню, поиска рецептов и управления кухней. Бот помогает:

- **Искать рецепты** по названию блюд
- **Сохранять избранные** рецепты
- **Планировать меню** на неделю
- **Находить случайные** рецепты для вдохновения
- **Просматривать рецепты** по категориям

Использует бесплатное API TheMealDB для получения рецептов со всего мира.

## Быстрый запуск

1. **Склонируйте репозиторий:**
   ```bash
   git clone [SemenovaCatherine/project2]
   cd cooking-bot
   ```

2. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```

3. **Настройте токен бота:**
   - Откройте файл `.env`
   - Убедитесь что токен правильный: `7239327864:AAH6P1DqOSfp7WsmW4hrF8jHT3f9BnlUIDY`
   - Или получите свой токен у [@BotFather](https://t.me/BotFather)

4. **Запустите бота:**
   ```bash
   python bot.py
   ```

Готово! Бот запущен и готов к работе.

## Получение токена бота (если нужен новый)

1. Напишите [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Придумайте имя бота (например: "Мой Кулинарный Помощник")
4. Придумайте username бота (должен заканчиваться на "bot")
5. Скопируйте полученный токен в файл `.env`

## Команды бота

- `/start` - запуск и приветствие
- `/help` - справка по командам
- `/search` - поиск рецептов
- `/favorites` - показать избранные рецепты
- `/menu` - показать меню на неделю

## Возможности

### Поиск рецептов
- Напишите название блюда (например: "паста", "борщ", "пицца")
- Получите рецепт с ингредиентами и инструкциями
- Добавьте рецепт в избранное одной кнопкой

### Избранные рецепты
- Сохраняйте понравившиеся рецепты
- Просматривайте список избранного
- Удаляйте ненужные рецепты

### Случайные рецепты
- Найдите вдохновение с помощью случайных рецептов
- Открывайте новые блюда из разных кухонь мира

### Планирование меню
- Сохраняйте рецепты для определенных дней недели
- Планируйте питание заранее

## Структура проекта

```
.
├── README.md              # этот файл
├── requirements.txt       # зависимости
├── .env                  # токен бота
├── bot.py                # главный файл запуска
├── config/               # настройки
│   ├── __init__.py
│   └── settings.py       # конфигурация
├── routers/              # обработчики команд
│   ├── __init__.py
│   ├── commands.py       # основные команды
│   └── handlers/
│       └── recipe_handlers.py  # обработка рецептов
├── keyboards/            # клавиатуры
│   ├── __init__.py
│   └── inline.py         # inline кнопки
├── services/             # внешние сервисы
│   └── api_client.py     # работа с TheMealDB API
├── middlewares/          # middleware
│   ├── __init__.py
│   └── throttling.py     # защита от спама
├── filters/              # фильтры
│   ├── __init__.py
│   ├── recipe_filter.py  # фильтр поиска
│   └── favorites_filter.py  # фильтр избранного
├── states/               # состояния FSM
│   ├── __init__.py
│   └── recipe_states.py  # состояния для рецептов
├── utils/                # утилиты
│   ├── __init__.py
│   ├── formatters.py     # форматирование сообщений
│   └── logger.py         # настройка логирования
└── storage/              # хранилище данных
    ├── data.json         # файл с данными (создается автоматически)
    └── data_manager.py   # функции работы с данными
```

## Автоматически создаваемые файлы

При первом запуске создаются:
- `storage/data.json` - база данных пользователей
- `logs/bot.log` - файл логов

## Используемые API

- **TheMealDB** (бесплатное): поиск рецептов, случайные рецепты, категории
- Не требует регистрации или ключей

## Важные особенности

- Данные сохраняются локально в JSON файлах
- Кэширование API запросов на 5 минут
- Защита от спама (1 запрос в секунду)
- Логирование всех действий
- Обработка ошибок и таймаутов API

## Решение проблем

**Бот не отвечает:**
- Проверьте правильность токена в `.env`
- Убедитесь что установлены все зависимости

**Ошибка при поиске рецептов:**
- Проверьте интернет соединение
- API TheMealDB может быть временно недоступно

**Данные не сохраняются:**
- Убедитесь что папка `storage/` доступна для записи

## Реализованные требования

**Базовый функционал (4 балла)**
- 5 команд: /start, /help, /search, /favorites, /menu
- Inline клавиатуры и кнопки
- Логирование в файл

**Внешние API (4 балла)**
- Интеграция с TheMealDB API
- Кэширование запросов (5 минут)
- Обработка таймаутов и ошибок

**Хранение данных (4 балла)**
- JSON база данных
- Операции: добавление, чтение, удаление избранного

**Продвинутый функционал (4 балла)**
- FSM для состояний поиска
- Middleware для защиты от спама
- 2 кастомных фильтра

**Структура проекта (4 балла)**
- Подробный README
- Правильная структура файлов
